(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{92:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return b})),a.d(t,"default",(function(){return d}));var n=a(3),i=a(7),r=(a(0),a(108)),o={sidebar_position:3},l={unversionedId:"storefront-integration-advanced/sdk",id:"storefront-integration-advanced/sdk",isDocsHomePage:!1,title:"Storefront SDK (Beta)",description:"You can build your own highly customized booking experience using Sesami SDK.",source:"@site/docs/storefront-integration-advanced/sdk.md",sourceDirName:"storefront-integration-advanced",slug:"/storefront-integration-advanced/sdk",permalink:"/docs/storefront-integration-advanced/sdk",editUrl:"https://github.com/sesamiapp/devportal/edit/master/docs/storefront-integration-advanced/sdk.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Custom pages",permalink:"/docs/storefront-integration-advanced/custom-pages"},next:{title:"Order confirmation emails",permalink:"/docs/email-templates/order-confirmation"}},b=[{value:"Enable the SDK",id:"enable-the-sdk",children:[]},{value:"Quick start",id:"quick-start",children:[]},{value:"Data",id:"data",children:[{value:"SesamiDayObject",id:"sesamidayobject",children:[]},{value:"SesamiSlotObject",id:"sesamislotobject",children:[]}]},{value:"Options",id:"options",children:[{value:"shopId",id:"shopid",children:[]},{value:"productId",id:"productid",children:[]},{value:"variantId",id:"variantid",children:[]},{value:"timezone",id:"timezone",children:[]},{value:"teamMember",id:"teammember",children:[]},{value:"quantity",id:"quantity",children:[]},{value:"weekStartDay",id:"weekstartday",children:[]},{value:"autoLoad",id:"autoload",children:[]},{value:"now",id:"now",children:[]}]},{value:"Methods",id:"methods",children:[{value:"init()",id:"init",children:[]},{value:"setDate(date)",id:"setdatedate",children:[]},{value:"setVariantId(variantId)",id:"setvariantidvariantid",children:[]},{value:"setTeamMember(teamMember)",id:"setteammemberteammember",children:[]},{value:"next(duration)",id:"nextduration",children:[]},{value:"previous(duration)",id:"previousduration",children:[]},{value:"load()",id:"load",children:[]}]},{value:"Helpers",id:"helpers",children:[{value:"formatDate(date, options)",id:"formatdatedate-options",children:[]},{value:"getSesamiFields(slot)",id:"getsesamifieldsslot",children:[]}]}],s={toc:b};function d(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"You can build your own highly customized booking experience using Sesami SDK."),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"The Sesami SDK for JavaScript supports the latest two versions of the most popular browsers. Internet explorer and older browsers are not supported."))),Object(r.b)("h2",{id:"enable-the-sdk"},"Enable the SDK"),Object(r.b)("p",null,"The Sesami SDK is currently in closed beta release. If you're interested in trying it out, you can reach out to our customer success team via our ",Object(r.b)("a",{parentName:"p",href:"https://help.sesami.co/"},"help desk"),"."),Object(r.b)("p",null,"After this feature is activated on your store, you can enable it from:"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Sesami app > Settings > Storefront settings > Use storefront SDK")),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"Enabling the Sesami SDK means that you need to implement storefront integration yourself and the Sesami button will not appear on product pages automatically.")),Object(r.b)("h2",{id:"quick-start"},"Quick start"),Object(r.b)("p",null,"Sesami will not block your other resources from being loaded and will not cause any delays or decrease in your store's performance, So you will need to initialize it when it is ready and loaded:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-markup"},"<script>\n  window.sesamiAsyncInit = () => {\n    \n    sesami = new SesamiSDK({\n      variantId: {{product.selected_or_first_available_variant.id}},\n      shopId: {{shop.id}},\n      productId: {{product.id}},\n      quantity: 1,\n      autoLoad: true\n    })\n\n    sesami.init();\n  }\n<\/script>\n\n")),Object(r.b)("p",null,"The code above will create a Sesami instance, You use it to render a fully customized calendar and get availabilities for each day."),Object(r.b)("h2",{id:"data"},"Data"),Object(r.b)("p",null,"Each instance of the Sesami SDK will contain a ",Object(r.b)("inlineCode",{parentName:"p"},"data")," object with the following structure:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"sesami = new SesamiSDK({/*options*/})\n\nsesami.data\n/*\n{\n  labels: Array<Date>,\n  Rows: Array<Array<SesamiDayObject>>\n}\n\nexample:\n\n{\n  labels: [Sun Dec 05 2021 00:00:00 {}, Mon Nov 29 2021 00:00:00 {}, ...],\n  Rows: [\n    [\n      date: Sun Nov 28 2021 00:00:00 {}\n      getAvailabilities: async \u0192 ()\n      isCurrentMonth: false\n      isCurrentWeek: false\n      isPast: true\n      isToday: false\n    ],\n    ...\n  ]\n}\n*/\n\n")),Object(r.b)("h3",{id:"sesamidayobject"},"SesamiDayObject"),Object(r.b)("p",null,"A Sesami day object contains the following properties:"),Object(r.b)("h4",{id:"date"},"date"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Date")," object representing this day"),Object(r.b)("h4",{id:"getavailabilities"},"getAvailabilities()"),Object(r.b)("p",null,"async function"),Object(r.b)("p",null,"Returns a promise that resolves to an array of available slots: ",Object(r.b)("inlineCode",{parentName:"p"},"Promise<Array<SesamiSlotObject>>")),Object(r.b)("h4",{id:"iscurrentmonth"},"isCurrentMonth"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Boolean")),Object(r.b)("p",null,"Determines if this day is within the same month as the currently set date."),Object(r.b)("h4",{id:"iscurrentweek"},"isCurrentWeek"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Boolean")),Object(r.b)("p",null,"Determines if this day is within the same week as the currently set date."),Object(r.b)("h4",{id:"ispast"},"isPast"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Boolean")),Object(r.b)("p",null,"Determines if this day is in the past."),Object(r.b)("h4",{id:"istoday"},"isToday"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Boolean")),Object(r.b)("p",null,"Determines if this day is today."),Object(r.b)("h3",{id:"sesamislotobject"},"SesamiSlotObject"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'/*\nexample:\n\n{\n  duration: 15\n  remainingSlots: 1\n  startTime: "2022-12-30 10:00"\n  status: "available"\n}\n\n*/\n')),Object(r.b)("h4",{id:"duration"},"duration"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Number")),Object(r.b)("p",null,"Slot duration in minutes"),Object(r.b)("h4",{id:"remainingslots"},"remainingSlots"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Number")),Object(r.b)("p",null,"Number of remaining slots in the currently selected time. Always 1 except for sevices that accept group appointments."),Object(r.b)("h4",{id:"starttime"},"startTime"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String")),Object(r.b)("p",null,"String representing starting date and time for the current slot in the selected timezone."),Object(r.b)("h4",{id:"status"},"status"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String")),Object(r.b)("p",null,'Currently the only possible value is "available" for storefront integrations.'),Object(r.b)("h2",{id:"options"},"Options"),Object(r.b)("p",null,"You can pass several options to SesamiSDK, here are all possible options:"),Object(r.b)("h3",{id:"shopid"},"shopId"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String"),"\n",Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"Required")),"\nValid Shopify shop ID."),Object(r.b)("h3",{id:"productid"},"productId"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String"),"\n",Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"Required")),"\nValid Shopify product ID."),Object(r.b)("h3",{id:"variantid"},"variantId"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String"),"\n",Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"Required")),"\nValid Shopify variant ID."),Object(r.b)("h3",{id:"timezone"},"timezone"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String"),"\nTimezone in which you'd like availabilities to be displayed.\nIANA timezone values. example: ",Object(r.b)("strong",{parentName:"p"},"America/New_York"),"\nDefaults to store timezone."),Object(r.b)("h3",{id:"teammember"},"teamMember"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"String"),"\nTeam member name, exactly as entered in Sesami.\nexample: ",Object(r.b)("strong",{parentName:"p"},"John Smith"),"\nDefaults to null, which will result in displaying availabilities for all team members that are connected to the current service."),Object(r.b)("h3",{id:"quantity"},"quantity"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Number"),"\nQuantity - Only use for a service with group appointments.\ndefaults to ",Object(r.b)("strong",{parentName:"p"},"1"),"."),Object(r.b)("h3",{id:"weekstartday"},"weekStartDay"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Number"),"\nThe weekday that should be considered as the first day of the week. Accepted values are ",Object(r.b)("strong",{parentName:"p"},"0 - 6"),":"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"0")," = Sunday",Object(r.b)("br",{parentName:"p"}),"\n",Object(r.b)("strong",{parentName:"p"},"1")," = Monday",Object(r.b)("br",{parentName:"p"}),"\n",Object(r.b)("strong",{parentName:"p"},"2")," = Tuesday",Object(r.b)("br",{parentName:"p"}),"\n",Object(r.b)("strong",{parentName:"p"},"3")," = Wednesday",Object(r.b)("br",{parentName:"p"}),"\n",Object(r.b)("strong",{parentName:"p"},"4")," = Thursday",Object(r.b)("br",{parentName:"p"}),"\n",Object(r.b)("strong",{parentName:"p"},"5")," = Friday",Object(r.b)("br",{parentName:"p"}),"\n",Object(r.b)("strong",{parentName:"p"},"6")," = Saturday  "),Object(r.b)("p",null,"defaults to ",Object(r.b)("strong",{parentName:"p"},"0"),"."),Object(r.b)("h3",{id:"autoload"},"autoLoad"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Boolean"),"\nIf this option is enabled, SDK will automatically fetch availabilities for the current month as soon as it is initialized, or the current date is updated."),Object(r.b)("p",null,"defaults to ",Object(r.b)("strong",{parentName:"p"},"false")),Object(r.b)("h3",{id:"now"},"now"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Date"),"\nCurrently selected date."),Object(r.b)("p",null,"defaults to ",Object(r.b)("strong",{parentName:"p"},"Current time: ",Object(r.b)("inlineCode",{parentName:"strong"},"new Date()"))),Object(r.b)("h2",{id:"methods"},"Methods"),Object(r.b)("p",null,"The Sesami SDK provides several methods to render a calendar and fetch availabilities:"),Object(r.b)("h3",{id:"init"},"init()"),Object(r.b)("p",null,"Initializes the instance and starts fetching availabilities for the current month if ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is enabled."),Object(r.b)("p",null,"Arguments: none"),Object(r.b)("h3",{id:"setdatedate"},"setDate(date)"),Object(r.b)("p",null,"Updates the current value for ",Object(r.b)("a",{parentName:"p",href:"#now"},"now")," and fetches new availabilities if not already fetched and ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is enabled."),Object(r.b)("p",null,"Arguments:  "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"date: ",Object(r.b)("inlineCode",{parentName:"li"},"Date"))),Object(r.b)("h3",{id:"setvariantidvariantid"},"setVariantId(variantId)"),Object(r.b)("p",null,"Updates the current value for ",Object(r.b)("a",{parentName:"p",href:"#variantid"},"variantId")," and fetches new availabilities if not already fetched and ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is enabled."),Object(r.b)("p",null,"Arguments: "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"variantId: ",Object(r.b)("inlineCode",{parentName:"li"},"String"))),Object(r.b)("h3",{id:"setteammemberteammember"},"setTeamMember(teamMember)"),Object(r.b)("p",null,"Updates the current value for ",Object(r.b)("a",{parentName:"p",href:"#teammember"},"teamMember")," and fetches new availabilities if not already fetched and ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is enabled."),Object(r.b)("p",null,"Arguments: "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"teamMember: ",Object(r.b)("inlineCode",{parentName:"li"},"String"))),Object(r.b)("h3",{id:"nextduration"},"next(duration)"),Object(r.b)("p",null,"Navigates to the next (year | month | week | day) and updates the current value for ",Object(r.b)("a",{parentName:"p",href:"#now"},"now")," and fetches new availabilities if not already fetched and ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is enabled."),Object(r.b)("p",null,"Arguments: "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"duration: ",Object(r.b)("inlineCode",{parentName:"li"},"String")," one of: ",Object(r.b)("inlineCode",{parentName:"li"},"year | month | week | day"))),Object(r.b)("h3",{id:"previousduration"},"previous(duration)"),Object(r.b)("p",null,"Navigates to the previous (year | month | week | day) and updates the current value for ",Object(r.b)("a",{parentName:"p",href:"#now"},"now")," and fetches new availabilities if not already fetched and ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is enabled."),Object(r.b)("p",null,"Arguments: "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"duration: ",Object(r.b)("inlineCode",{parentName:"li"},"String")," one of: ",Object(r.b)("inlineCode",{parentName:"li"},"year | month | week | day"))),Object(r.b)("h3",{id:"load"},"load()"),Object(r.b)("p",null,"Loads availabilities for the currently selected range. Only needed if ",Object(r.b)("a",{parentName:"p",href:"#autoload"},"autoLoad")," is disabled. This method will only trigger a network request if the data is not already available."),Object(r.b)("p",null,"Arguments: None"),Object(r.b)("h2",{id:"helpers"},"Helpers"),Object(r.b)("h3",{id:"formatdatedate-options"},"formatDate(date, options)"),Object(r.b)("p",null,"Returnes formatted date in user's preferred locale.\nThis is a wrapper around ",Object(r.b)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat"},Object(r.b)("inlineCode",{parentName:"a"},"Intl.DateTimeFormat"))),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'  sesami.formatDate(new Date("2022-07-07"), {month: "short", year: "numeric"})\n  // Jul 2022\n')),Object(r.b)("p",null,"Arguments: "),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"date: ",Object(r.b)("inlineCode",{parentName:"li"},"Date")),Object(r.b)("li",{parentName:"ul"},"options: ",Object(r.b)("inlineCode",{parentName:"li"},"Object")," - Please check ",Object(r.b)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat"},"Intl.DateTimeFormat")," for available options")),Object(r.b)("h3",{id:"getsesamifieldsslot"},"getSesamiFields(slot)"),Object(r.b)("p",null,"Returns a set of hidden input fields that are normally used in a Shopify storefront to add a product with the selected time slot as ",Object(r.b)("a",{parentName:"p",href:"https://shopify.dev/api/liquid/objects/line_item#line_item-properties"},Object(r.b)("strong",{parentName:"a"},"Line item properties"))," to the cart."),Object(r.b)("p",null,"Check out ",Object(r.b)("a",{parentName:"p",href:"/docs/storefront-integration/anatomy-of-sesami-button#rendered-result"},"rendered result")," section in storefront integration for more information about these fields."),Object(r.b)("p",null,"Arguments:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"slot: ",Object(r.b)("a",{parentName:"li",href:"#sesamislotobject"},"SesamiSlotObject")," returned from getAvailabilities method.")))}d.isMDXComponent=!0}}]);